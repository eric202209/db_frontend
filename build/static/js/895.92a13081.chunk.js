"use strict";(self.webpackChunkdb_frontend=self.webpackChunkdb_frontend||[]).push([[895],{895:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(43),n=a(658);const r="label";function c(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function o(e,t){e.labels=t}function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;const s=[];e.datasets=t.map((t=>{const n=e.datasets.find((e=>e[a]===t[a]));return n&&t.data&&!s.includes(n)?(s.push(n),Object.assign(n,t),n):{...t}}))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;const a={labels:[],datasets:[]};return o(a,e.labels),l(a,e.datasets,t),a}function u(e,t){const{height:a=150,width:r=300,redraw:u=!1,datasetIdKey:d,type:f,data:g,options:h,plugins:b=[],fallbackContent:p,updateMode:v,...y}=e,C=(0,s.useRef)(null),m=(0,s.useRef)(),k=()=>{C.current&&(m.current=new n.t1(C.current,{type:f,data:i(g,d),options:h&&{...h},plugins:b}),c(t,m.current))},j=()=>{c(t,null),m.current&&(m.current.destroy(),m.current=null)};return(0,s.useEffect)((()=>{!u&&m.current&&h&&function(e,t){const a=e.options;a&&t&&Object.assign(a,t)}(m.current,h)}),[u,h]),(0,s.useEffect)((()=>{!u&&m.current&&o(m.current.config.data,g.labels)}),[u,g.labels]),(0,s.useEffect)((()=>{!u&&m.current&&g.datasets&&l(m.current.config.data,g.datasets,d)}),[u,g.datasets]),(0,s.useEffect)((()=>{m.current&&(u?(j(),setTimeout(k)):m.current.update(v))}),[u,h,g.labels,g.datasets,v]),(0,s.useEffect)((()=>{m.current&&(j(),setTimeout(k))}),[f]),(0,s.useEffect)((()=>(k(),()=>j())),[]),s.createElement("canvas",Object.assign({ref:C,role:"img",height:a,width:r},y),p)}const d=(0,s.forwardRef)(u);function f(e,t){return n.t1.register(t),(0,s.forwardRef)(((t,a)=>s.createElement(d,Object.assign({},t,{ref:a,type:e}))))}const g=f("line",n.ZT),h=f("bar",n.A6),b=f("pie",n.P$);var p=a(579);n.t1.register(n.PP,n.kc,n.E8,n.No,n.Bs,n.FN,n.hE,n.m_,n.s$);const v=e=>{let{data:t=[],title:a,type:n}=e;const[r,c]=(0,s.useState)(null);if(!t||0===t.length)return(0,p.jsx)("div",{children:"No data available for this chart."});console.log("Chart data:",t);const o={labels:Array.isArray(t)?t.map((e=>e.make||e.vehClass||e.fuelType||e.trans||e.co2Rating||"")):[],datasets:[{label:a,data:Array.isArray(t)?t.map((e=>e.avgCons||e.combCons||e.count||e.avgCo2||e.percentage||0)):[],backgroundColor:"rgba(75,192,192,0.6)",borderColor:"rgba(75,192,192,1)",borderWidth:1,hoverBackgroundColor:"rgba(75,192,192,0.4)",hoverBorderColor:"rgba(75,192,192,1)"}]},l={scales:{y:{beginAtZero:!0}},onClick:(e,a)=>{if(a.length>0){const e=a[0].index;c(t[e])}},responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:a}}};let i;switch(n){case"fuelTypeDist":case"co2RatingPct":i=b;break;case"consByTrans":case"co2ByClass":i=g;break;default:i=h}return(0,p.jsxs)("div",{className:"chart",children:[(0,p.jsx)("h2",{children:a}),(0,p.jsx)(i,{data:o,options:l}),r&&(0,p.jsxs)("div",{className:"detail-view",children:[(0,p.jsx)("h3",{children:r.make||r.vehClass||r.fuelType||r.trans||r.co2Rating}),(0,p.jsxs)("p",{children:["Value: ",r.avgCons||r.combCons||r.count||r.avgCo2||r.percentage]})]})]})}}}]);
//# sourceMappingURL=895.92a13081.chunk.js.map