"use strict";(self.webpackChunkdb_frontend=self.webpackChunkdb_frontend||[]).push([[396,764,640],{396:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(43);var s=a(764),r=a(640),n=a(579);const l=e=>{let{data:t,comparisonData:a}=e;const l=(e,t,a)=>{if(console.log("Formatting chart data for ".concat(t,":"),e),!e||Array.isArray(e)&&0===e.length)return console.warn("No data available for ".concat(t)),[];return a?(e=>{const a=Array.isArray(e)?e:[e];switch(t){case"avgConsMake":return a.map((e=>({label:e.MAKE,value:parseFloat(e.COMBINED_CONSUMPTION)})));case"co2ByClass":return a.map((e=>({label:e.VEHICLE_CLASS,value:parseFloat(e.CO2_EMISSIONS)})));case"fuelTypeDist":const e=a.reduce(((e,t)=>(e[t.FUEL_TYPE]=(e[t.FUEL_TYPE]||0)+1,e)),{});return Object.entries(e).map((e=>{let[t,a]=e;return{label:t,value:a}}));case"bestSmog":return a.map((e=>({label:"".concat(e.MAKE," ").concat(e.MODEL),value:parseFloat(e.SMOG_RATING)})));case"consByTrans":return a.map((e=>({label:e.TRANSMISSION,value:parseFloat(e.COMBINED_CONSUMPTION)})));case"co2RatingPct":const s=a.reduce(((e,t)=>{const a=t.co2_rating||"Unknown";return e[a]=(e[a]||0)+1,e}),{}),r=Object.values(s).reduce(((e,t)=>e+t),0);return Object.entries(s).map((e=>{let[t,a]=e;return{label:t.toString(),value:a/r*100}}));case"topLowCo2":const n=a.reduce(((e,t)=>{const a=t.make||"Unknown";return e[a]||(e[a]=[]),e[a].push(parseFloat(t.co2_emissions)||0),e}),{});return Object.entries(n).map((e=>{let[t,a]=e;return{label:t,value:a.reduce(((e,t)=>e+t),0)/a.length}})).sort(((e,t)=>e.value-t.value)).slice(0,10);case"topEfficient":return a.map((e=>({label:"".concat(e.MAKE," ").concat(e.MODEL),value:parseFloat(e.COMBINED_CONSUMPTION)})));default:return console.warn("Unsupported key: ".concat(t)),[]}})(e):e.map((e=>{const a=Object.keys(e);let s,r;switch(t){case"fuelTypeDist":case"avgConsMake":case"co2ByClass":case"consByTrans":case"topLowCo2":s=1,r=2;break;case"bestSmog":case"topEfficient":s=2,r=3;break;case"co2RatingPct":s=1,r=3;break;default:return null}return{label:e[a[s]],value:parseFloat(e[a[r]])}})).filter(Boolean)};return(0,n.jsx)("div",{className:"analysis-results",children:[{key:"avgConsMake",title:"Average Consumption",type:"bar"},{key:"co2ByClass",title:"CO2 Emissions by Vehicle Class",type:"bar"},{key:"fuelTypeDist",title:"Fuel Type Distribution",type:"pie"},{key:"bestSmog",title:"Best Smog Ratings",type:"line"},{key:"consByTrans",title:"Consumption by Transmission",type:"bar"},{key:"co2RatingPct",title:"CO2 Rating Percentages",type:"pie"},{key:"topLowCo2",title:"Top Low CO2 Emitters",type:"bar"},{key:"topEfficient",title:"Top Efficient Vehicles",type:"line"}].map((e=>{let{key:a,title:o,type:i}=e;return(0,n.jsxs)("div",{className:"chart-section",children:[(0,n.jsx)("h2",{children:o}),t[a]&&t[a].length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.default,{data:l(t[a],a),title:o,type:i}),(0,n.jsx)(r.default,{data:t[a]})]}):(0,n.jsxs)("p",{className:"no-data-message",children:["No data available for ",o,"."]})]},a)}))})}},764:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});a(43);var s=a(58),r=a(658),n=a(579);r.t1.register(r.PP,r.kc,r.FN,r.No,r.E8,r.Bs,r.hE,r.m_,r.s$);const l=e=>{const t=["rgba(75,192,192,0.6)","rgba(255,99,132,0.6)","rgba(255,206,86,0.6)","rgba(54,162,235,0.6)","rgba(153,102,255,0.6)","rgba(255,159,64,0.6)"];return Array(e).fill().map(((e,a)=>t[a%t.length]))},o=e=>{let{data:t,type:a,title:r}=e;if(console.log("Rendering chart for ".concat(r,":"),t),!t||!Array.isArray(t)||0===t.length)return(0,n.jsx)("div",{children:"No data available for this chart."});const o=t.map((e=>e.label||"Undefined")),i=t.map((e=>{const t=parseFloat(e.value);return isNaN(t)?0:t})),c={labels:o,datasets:[{label:r,data:i,backgroundColor:"pie"===a?l(i.length):l(1)[0],borderColor:"line"===a?l(1)[0]:"rgba(75,192,192,1)",borderWidth:1}]},d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:14,weight:"bold"}}},title:{display:!0,text:r,font:{size:18,weight:"bold"}},tooltip:{callbacks:{label:e=>{let t,s=e.label||"";return s&&(s+=": "),t="pie"===a?e.parsed:e.parsed.y,null===t||isNaN(t)?s+="N/A":(t=parseFloat(t),"CO2 Rating Percentages"===r?s+=t.toFixed(2)+"%":"Top Low CO2 Vehicles"===r||"CO2 Emissions by Vehicle Class"===r?s+=t.toFixed(2)+" g/km":"Consumption by Transmission"===r||r.includes("Consumption")?s+=t.toFixed(2)+" L/100km":s+=t.toFixed(2)),s}}}},scales:"pie"!==a?{y:{beginAtZero:!0,ticks:{font:{size:12},callback:function(e){return null===e||isNaN(e)?"N/A":(e=parseFloat(e),"CO2 Rating Percentages"===r?e.toFixed(2)+"%":"Top Low CO2 Vehicles"===r||"CO2 Emissions by Vehicle Class"===r?e.toFixed(2)+" g/km":"Consumption by Transmission"===r||r.includes("Consumption")?e.toFixed(2)+" L/100km":e.toFixed(2))}},grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{ticks:{font:{size:12}},grid:{color:"rgba(0, 0, 0, 0.1)"}}}:{}};return(0,n.jsx)("div",{className:"chart-container",children:(()=>{try{switch(a){case"bar":default:return(0,n.jsx)(s.yP,{data:c,options:d});case"line":return(0,n.jsx)(s.N1,{data:c,options:d});case"pie":return(0,n.jsx)(s.Fq,{data:c,options:d})}}catch(e){return console.error("Error rendering chart:",e),(0,n.jsx)("div",{children:"Error rendering chart. Check console for details."})}})()})}},640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});a(43);var s=a(579);const r=e=>{let{data:t}=e;if(!t||0===t.length)return null;const a=Object.keys(t[0]);return(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:a.map((e=>(0,s.jsx)("th",{children:e.replace(/_/g," ")},e)))})}),(0,s.jsx)("tbody",{children:t.map(((e,t)=>(0,s.jsx)("tr",{children:a.map((t=>(0,s.jsx)("td",{children:e[t]},t)))},t)))})]})}}}]);
//# sourceMappingURL=396.cb5477e4.chunk.js.map