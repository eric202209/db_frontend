"use strict";(self.webpackChunkdb_frontend=self.webpackChunkdb_frontend||[]).push([[260,895,98,396],{396:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});s(43);var a=s(895),n=s(579);const r=e=>{let{data:t}=e;return(0,n.jsxs)("div",{className:"analysis-results",children:[(0,n.jsx)("h2",{children:"Analysis Results"}),Object.entries({avgConsMake:"Avg Consumption by Make Year",co2ByClass:"CO2 Emissions by Vehicle Class",fuelTypeDist:"Fuel Type Distribution",bestSmog:"Best Smog Ratings",consByTrans:"Consumption by Transmission",co2RatingPct:"CO2 Rating Percentages",topLowCo2:"Top Low CO2 Emitters"}).map((e=>{let[s,r]=e;return(0,n.jsx)(a.default,{data:t[s],title:r,type:s},s)}))]})}},895:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(43),n=s(658);const r="label";function l(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function i(e,t){e.labels=t}function c(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;const a=[];e.datasets=t.map((t=>{const n=e.datasets.find((e=>e[s]===t[s]));return n&&t.data&&!a.includes(n)?(a.push(n),Object.assign(n,t),n):{...t}}))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;const s={labels:[],datasets:[]};return i(s,e.labels),c(s,e.datasets,t),s}function d(e,t){const{height:s=150,width:r=300,redraw:d=!1,datasetIdKey:u,type:h,data:f,options:p,plugins:g=[],fallbackContent:m,updateMode:b,...j}=e,C=(0,a.useRef)(null),x=(0,a.useRef)(),y=()=>{C.current&&(x.current=new n.t1(C.current,{type:h,data:o(f,u),options:p&&{...p},plugins:g}),l(t,x.current))},v=()=>{l(t,null),x.current&&(x.current.destroy(),x.current=null)};return(0,a.useEffect)((()=>{!d&&x.current&&p&&function(e,t){const s=e.options;s&&t&&Object.assign(s,t)}(x.current,p)}),[d,p]),(0,a.useEffect)((()=>{!d&&x.current&&i(x.current.config.data,f.labels)}),[d,f.labels]),(0,a.useEffect)((()=>{!d&&x.current&&f.datasets&&c(x.current.config.data,f.datasets,u)}),[d,f.datasets]),(0,a.useEffect)((()=>{x.current&&(d?(v(),setTimeout(y)):x.current.update(b))}),[d,p,f.labels,f.datasets,b]),(0,a.useEffect)((()=>{x.current&&(v(),setTimeout(y))}),[h]),(0,a.useEffect)((()=>(y(),()=>v())),[]),a.createElement("canvas",Object.assign({ref:C,role:"img",height:s,width:r},j),m)}const u=(0,a.forwardRef)(d);function h(e,t){return n.t1.register(t),(0,a.forwardRef)(((t,s)=>a.createElement(u,Object.assign({},t,{ref:s,type:e}))))}const f=h("line",n.ZT),p=h("bar",n.A6),g=h("pie",n.P$);var m=s(579);n.t1.register(n.PP,n.kc,n.E8,n.No,n.Bs,n.FN,n.hE,n.m_,n.s$);const b=e=>{let{data:t=[],title:s,type:n}=e;const[r,l]=(0,a.useState)(null);if(!t||0===t.length)return(0,m.jsx)("div",{children:"No data available for this chart."});console.log("Chart data:",t);const i={labels:t.map((e=>e.MAKE||e.VEHICLE_CLASS||e.FUEL_TYPE||e.TRANSMISSION||e.CO2_RATING||"")),datasets:[{label:s,data:t.map((e=>e.AVG_CONS||e.COMB_CONS||e.COUNT||e.AVG_CO2||e.PERCENTAGE||0)),backgroundColor:"rgba(75,192,192,0.6)",borderColor:"rgba(75,192,192,1)",borderWidth:1,hoverBackgroundColor:"rgba(75,192,192,0.4)",hoverBorderColor:"rgba(75,192,192,1)"}]};console.log("Processed chart data:",i);const c={scales:{y:{beginAtZero:!0}},onClick:(e,s)=>{if(s.length>0){const e=s[0].index;l(t[e])}},responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:s}}};let o;switch(n){case"fuelTypeDist":case"co2RatingPct":case"topEfficient":o=g;break;case"consByTrans":case"co2ByClass":case"avgConsMake":case"bestSmog":case"topLowCo2":o=f;break;default:o=p}return(0,m.jsxs)("div",{className:"chart",children:["bar"===n&&(0,m.jsx)(p,{data:i}),"line"===n&&(0,m.jsx)(f,{data:i}),"pie"===n&&(0,m.jsx)(g,{data:i}),(0,m.jsx)("h2",{children:s}),(0,m.jsx)(o,{data:i,options:c}),r&&(0,m.jsxs)("div",{className:"detail-view",children:[(0,m.jsx)("h3",{children:r.make||r.vehClass||r.fuelType||r.trans||r.co2Rating}),(0,m.jsxs)("p",{children:["Value: ",r.avgCons||r.combCons||r.count||r.avgCo2||r.percentage]})]})]})}},98:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});s(43);var a=s(579);const n=e=>{let{items:t}=e;if(0===t.length)return null;const s=Object.keys(t[0]).filter((e=>"id"!==e));return(0,a.jsxs)("div",{className:"comparison-view",children:[(0,a.jsx)("h2",{children:"Vehicle Comparison"}),(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Attribute"}),t.map(((e,t)=>(0,a.jsx)("th",{children:"Vehicle ".concat(t+1)},t)))]})}),(0,a.jsx)("tbody",{children:s.map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e}),t.map(((t,s)=>(0,a.jsx)("td",{children:t[e]},s)))]},e)))})]})]})}},260:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(43),n=s(213),r=s(904),l=s(98),i=s(396),c=s(579);const o=()=>{const[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)({}),[d,u]=(0,a.useState)([]),[h,f]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null);(0,a.useEffect)((()=>{m()}),[]);const m=async()=>{f(!0);try{const e=await n.A.get("/api/analysis-data");o(e.data)}catch(e){g("Failed to fetch analysis data. Please try again later."),console.error("Error fetching analysis data:",e)}finally{f(!1)}};return h?(0,c.jsx)("div",{className:"loading",children:"Loading..."}):p?(0,c.jsx)("div",{className:"error-message",children:p}):(0,c.jsxs)("div",{className:"dashboard",children:[(0,c.jsx)(r.default,{onFilterChange:async e=>{try{const s=await n.A.get("/api/filtered-data",{params:e});t(s.data)}catch(s){g("Failed to apply filters. Please try again."),console.error("Error applying filters:",s)}}}),(0,c.jsxs)("div",{className:"filtered-results",children:[(0,c.jsx)("h2",{children:"Filtered Results"}),e.map((e=>(0,c.jsxs)("div",{className:"vehicle-item",children:[(0,c.jsx)("p",{children:"".concat(e.modelYear," ").concat(e.make," ").concat(e.model)}),(0,c.jsx)("button",{onClick:()=>{return t=e,void u((e=>e.some((e=>e.id===t.id))?e.filter((e=>e.id!==t.id)):[...e,t]));var t},children:d.some((t=>t.id===e.id))?"Remove from Comparison":"Add to Comparison"})]},e.id)))]}),d.length>0&&(0,c.jsx)(l.default,{items:d}),(0,c.jsx)(i.default,{data:s})]})}}}]);
//# sourceMappingURL=260.86b26ab2.chunk.js.map