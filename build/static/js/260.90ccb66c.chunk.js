"use strict";(self.webpackChunkdb_frontend=self.webpackChunkdb_frontend||[]).push([[260,895,98,396],{396:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});s(43);var a=s(895),r=s(579);const n=e=>{let{data:t}=e;return(0,r.jsxs)("div",{className:"analysis-results",children:[(0,r.jsx)("h2",{children:"Analysis Results"}),Object.entries({avgConsMake:"Average Consumption by Make",co2ByClass:"CO2 Emissions by Vehicle Class",fuelTypeDist:"Fuel Type Distribution",bestSmog:"Best Smog Ratings",consByTrans:"Consumption by Transmission",co2RatingPct:"CO2 Rating Percentages",topLowCo2:"Top Low CO2 Emitters"}).map((e=>{let[s,n]=e;return(0,r.jsx)(a.default,{data:t[s],title:n,type:s},s)}))]})}},895:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(43),r=s(658);const n="label";function l(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function i(e,t){e.labels=t}function c(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;const a=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[s]===t[s]));return r&&t.data&&!a.includes(r)?(a.push(r),Object.assign(r,t),r):{...t}}))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const s={labels:[],datasets:[]};return i(s,e.labels),c(s,e.datasets,t),s}function d(e,t){const{height:s=150,width:n=300,redraw:d=!1,datasetIdKey:u,type:h,data:f,options:g,plugins:p=[],fallbackContent:m,updateMode:b,...y}=e,j=(0,a.useRef)(null),v=(0,a.useRef)(),x=()=>{j.current&&(v.current=new r.t1(j.current,{type:h,data:o(f,u),options:g&&{...g},plugins:p}),l(t,v.current))},C=()=>{l(t,null),v.current&&(v.current.destroy(),v.current=null)};return(0,a.useEffect)((()=>{!d&&v.current&&g&&function(e,t){const s=e.options;s&&t&&Object.assign(s,t)}(v.current,g)}),[d,g]),(0,a.useEffect)((()=>{!d&&v.current&&i(v.current.config.data,f.labels)}),[d,f.labels]),(0,a.useEffect)((()=>{!d&&v.current&&f.datasets&&c(v.current.config.data,f.datasets,u)}),[d,f.datasets]),(0,a.useEffect)((()=>{v.current&&(d?(C(),setTimeout(x)):v.current.update(b))}),[d,g,f.labels,f.datasets,b]),(0,a.useEffect)((()=>{v.current&&(C(),setTimeout(x))}),[h]),(0,a.useEffect)((()=>(x(),()=>C())),[]),a.createElement("canvas",Object.assign({ref:j,role:"img",height:s,width:n},y),m)}const u=(0,a.forwardRef)(d);function h(e,t){return r.t1.register(t),(0,a.forwardRef)(((t,s)=>a.createElement(u,Object.assign({},t,{ref:s,type:e}))))}const f=h("line",r.ZT),g=h("bar",r.A6),p=h("pie",r.P$);var m=s(579);r.t1.register(r.PP,r.kc,r.E8,r.No,r.Bs,r.FN,r.hE,r.m_,r.s$);const b=e=>{let{data:t=[],title:s,type:r}=e;const[n,l]=(0,a.useState)(null);if(!t||0===t.length)return(0,m.jsx)("div",{children:"No data available for this chart."});console.log("Chart data:",t);const i={labels:Array.isArray(t)?t.map((e=>e.make||e.vehClass||e.fuelType||e.trans||e.co2Rating||"")):[],datasets:[{label:s,data:Array.isArray(t)?t.map((e=>e.avgCons||e.combCons||e.count||e.avgCo2||e.percentage||0)):[],backgroundColor:"rgba(75,192,192,0.6)",borderColor:"rgba(75,192,192,1)",borderWidth:1,hoverBackgroundColor:"rgba(75,192,192,0.4)",hoverBorderColor:"rgba(75,192,192,1)"}]},c={scales:{y:{beginAtZero:!0}},onClick:(e,s)=>{if(s.length>0){const e=s[0].index;l(t[e])}},responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:s}}};let o;switch(r){case"fuelTypeDist":case"co2RatingPct":o=p;break;case"consByTrans":case"co2ByClass":o=f;break;default:o=g}return(0,m.jsxs)("div",{className:"chart",children:[(0,m.jsx)("h2",{children:s}),(0,m.jsx)(o,{data:i,options:c}),n&&(0,m.jsxs)("div",{className:"detail-view",children:[(0,m.jsx)("h3",{children:n.make||n.vehClass||n.fuelType||n.trans||n.co2Rating}),(0,m.jsxs)("p",{children:["Value: ",n.avgCons||n.combCons||n.count||n.avgCo2||n.percentage]})]})]})}},98:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});s(43);var a=s(579);const r=e=>{let{items:t}=e;if(0===t.length)return null;const s=Object.keys(t[0]).filter((e=>"id"!==e));return(0,a.jsxs)("div",{className:"comparison-view",children:[(0,a.jsx)("h2",{children:"Vehicle Comparison"}),(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Attribute"}),t.map(((e,t)=>(0,a.jsx)("th",{children:"Vehicle ".concat(t+1)},t)))]})}),(0,a.jsx)("tbody",{children:s.map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e}),t.map(((t,s)=>(0,a.jsx)("td",{children:t[e]},s)))]},e)))})]})]})}},260:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(43),r=s(213),n=s(904),l=s(98),i=s(396),c=s(579);const o=()=>{const[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)({}),[d,u]=(0,a.useState)([]),[h,f]=(0,a.useState)(!0),[g,p]=(0,a.useState)(null);(0,a.useEffect)((()=>{m()}),[]);const m=async()=>{f(!0);try{const e=await r.A.get("/api/analysis-data");o(e.data)}catch(e){p("Failed to fetch analysis data. Please try again later."),console.error("Error fetching analysis data:",e)}finally{f(!1)}};return h?(0,c.jsx)("div",{className:"loading",children:"Loading..."}):g?(0,c.jsx)("div",{className:"error-message",children:g}):(0,c.jsxs)("div",{className:"dashboard",children:[(0,c.jsx)(n.default,{onFilterChange:async e=>{try{const s=await r.A.get("/api/filtered-data",{params:e});t(s.data)}catch(s){p("Failed to apply filters. Please try again."),console.error("Error applying filters:",s)}}}),(0,c.jsxs)("div",{className:"filtered-results",children:[(0,c.jsx)("h2",{children:"Filtered Results"}),e.map((e=>(0,c.jsxs)("div",{className:"vehicle-item",children:[(0,c.jsx)("p",{children:"".concat(e.modelYear," ").concat(e.make," ").concat(e.model)}),(0,c.jsx)("button",{onClick:()=>{return t=e,void u((e=>e.some((e=>e.id===t.id))?e.filter((e=>e.id!==t.id)):[...e,t]));var t},children:d.some((t=>t.id===e.id))?"Remove from Comparison":"Add to Comparison"})]},e.id)))]}),d.length>0&&(0,c.jsx)(l.default,{items:d}),(0,c.jsx)(i.default,{data:s})]})}}}]);
//# sourceMappingURL=260.90ccb66c.chunk.js.map