"use strict";(self.webpackChunkdb_frontend=self.webpackChunkdb_frontend||[]).push([[260,895,640,98,396],{396:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(43);var s=a(895),r=a(640),n=a(579);const l=e=>{let{data:t}=e;const a=e=>{if(!e||0===e.length)return[];let t=e.map((e=>({label:e[Object.keys(e)[0]],value:parseFloat(e[Object.keys(e)[1]])})));return t.sort(((e,t)=>e.value-t.value)),t};return(0,n.jsxs)("div",{className:"analysis-results",children:[(0,n.jsx)("h2",{children:"Analysis Results"}),[{key:"avgConsMake",title:"Avg Consumption by Make Year",type:"line"},{key:"co2ByClass",title:"CO2 Emissions by Vehicle Class",type:"bar"},{key:"fuelTypeDist",title:"Fuel Type Distribution",type:"pie"},{key:"bestSmog",title:"Best Smog Ratings",type:"bar"},{key:"consByTrans",title:"Consumption by Transmission",type:"bar"},{key:"co2RatingPct",title:"CO2 Rating Percentages",type:"pie"},{key:"topLowCo2",title:"Top Low CO2 Emitters",type:"bar"},{key:"topEfficient",title:"Top Efficient Vehicles",type:"bar"}].map((e=>(0,n.jsxs)("div",{className:"chart-section",children:[(0,n.jsx)("h3",{children:e.title}),(0,n.jsx)(s.default,{data:a(t[e.key]),type:e.type,title:e.title}),(0,n.jsx)(r.default,{data:t[e.key]})]},e.key)))]})}},895:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(43),r=a(658);const n="label";function l(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function i(e,t){e.labels=t}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;const s=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[a]===t[a]));return r&&t.data&&!s.includes(r)?(s.push(r),Object.assign(r,t),r):{...t}}))}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const a={labels:[],datasets:[]};return i(a,e.labels),c(a,e.datasets,t),a}function o(e,t){const{height:a=150,width:n=300,redraw:o=!1,datasetIdKey:u,type:h,data:p,options:f,plugins:b=[],fallbackContent:y,updateMode:m,...g}=e,j=(0,s.useRef)(null),x=(0,s.useRef)(),v=()=>{j.current&&(x.current=new r.t1(j.current,{type:h,data:d(p,u),options:f&&{...f},plugins:b}),l(t,x.current))},k=()=>{l(t,null),x.current&&(x.current.destroy(),x.current=null)};return(0,s.useEffect)((()=>{!o&&x.current&&f&&function(e,t){const a=e.options;a&&t&&Object.assign(a,t)}(x.current,f)}),[o,f]),(0,s.useEffect)((()=>{!o&&x.current&&i(x.current.config.data,p.labels)}),[o,p.labels]),(0,s.useEffect)((()=>{!o&&x.current&&p.datasets&&c(x.current.config.data,p.datasets,u)}),[o,p.datasets]),(0,s.useEffect)((()=>{x.current&&(o?(k(),setTimeout(v)):x.current.update(m))}),[o,f,p.labels,p.datasets,m]),(0,s.useEffect)((()=>{x.current&&(k(),setTimeout(v))}),[h]),(0,s.useEffect)((()=>(v(),()=>k())),[]),s.createElement("canvas",Object.assign({ref:j,role:"img",height:a,width:n},g),y)}const u=(0,s.forwardRef)(o);function h(e,t){return r.t1.register(t),(0,s.forwardRef)(((t,a)=>s.createElement(u,Object.assign({},t,{ref:a,type:e}))))}const p=h("line",r.ZT),f=h("bar",r.A6),b=h("pie",r.P$);var y=a(579);r.t1.register(r.PP,r.kc,r.FN,r.No,r.E8,r.Bs,r.hE,r.m_,r.s$);const m=e=>{let{data:t,type:a,title:s}=e;if(!t||0===t.length)return(0,y.jsx)("div",{children:"No data available for this chart."});const r=t.map((e=>e.label)),n=t.map((e=>e.value)),l=e=>{const t=["rgba(75,192,192,0.6)","rgba(255,99,132,0.6)","rgba(255,206,86,0.6)","rgba(54,162,235,0.6)","rgba(153,102,255,0.6)","rgba(255,159,64,0.6)"];return Array(e).fill().map(((e,a)=>t[a%t.length]))},i={labels:r,datasets:[{label:s,data:n,backgroundColor:"pie"===a?l(n.length):l(1)[0],borderColor:"line"===a?l(1)[0]:"rgba(75,192,192,1)",borderWidth:1}]},c={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:s},tooltip:{callbacks:{label:e=>"".concat(e.parsed.y||e.parsed)}}},scales:"pie"!==a?{y:{beginAtZero:!0}}:{}};return(0,y.jsx)("div",{className:"chart-container",children:(()=>{switch(a){case"bar":default:return(0,y.jsx)(f,{data:i,options:c});case"line":return(0,y.jsx)(p,{data:i,options:c});case"pie":return(0,y.jsx)(b,{data:i,options:c})}})()})}},98:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});a(43);var s=a(579);const r=e=>{let{items:t}=e;if(0===t.length)return null;const a=Object.keys(t[0]).filter((e=>"id"!==e));return(0,s.jsxs)("div",{className:"comparison-view",children:[(0,s.jsx)("h2",{children:"Vehicle Comparison"}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Attribute"}),t.map(((e,t)=>(0,s.jsx)("th",{children:"Vehicle ".concat(t+1)},t)))]})}),(0,s.jsx)("tbody",{children:a.map((e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e}),t.map(((t,a)=>(0,s.jsx)("td",{children:t[e]},a)))]},e)))})]})]})}},260:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(43),r=a(213),n=a(904),l=a(98),i=a(396),c=a(579);const d=()=>{const[e,t]=(0,s.useState)([]),[a,d]=(0,s.useState)({}),[o,u]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[f,b]=(0,s.useState)(null);(0,s.useEffect)((()=>{y()}),[]);const y=async()=>{p(!0);try{const e=await r.A.get("/api/analysis-data");d(e.data)}catch(e){b("Failed to fetch analysis data. Please try again later."),console.error("Error fetching analysis data:",e)}finally{p(!1)}};return h?(0,c.jsx)("div",{className:"loading",children:"Loading..."}):f?(0,c.jsx)("div",{className:"error-message",children:f}):(0,c.jsxs)("div",{className:"dashboard",children:[(0,c.jsx)(n.default,{onFilterChange:async e=>{try{const a=await r.A.get("/api/filtered-data",{params:e});t(a.data)}catch(a){b("Failed to apply filters. Please try again."),console.error("Error applying filters:",a)}}}),(0,c.jsxs)("div",{className:"filtered-results",children:[(0,c.jsx)("h2",{children:"Filtered Results"}),e.map((e=>(0,c.jsxs)("div",{className:"vehicle-item",children:[(0,c.jsx)("p",{children:"".concat(e.modelYear," ").concat(e.make," ").concat(e.model)}),(0,c.jsx)("button",{onClick:()=>{return t=e,void u((e=>e.some((e=>e.id===t.id))?e.filter((e=>e.id!==t.id)):[...e,t]));var t},children:o.some((t=>t.id===e.id))?"Remove from Comparison":"Add to Comparison"})]},e.id)))]}),o.length>0&&(0,c.jsx)(l.default,{items:o}),(0,c.jsx)(i.default,{data:a})]})}},640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});a(43);var s=a(579);const r=e=>{let{data:t,onComparisonToggle:a}=e;if(!t||0===t.length)return(0,s.jsx)("p",{children:"No data available."});const r=Object.keys(t[0]);return(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[r.map((e=>(0,s.jsx)("th",{children:e},e))),(0,s.jsx)("th",{children:"Compare"})]})}),(0,s.jsx)("tbody",{children:t.map(((e,t)=>(0,s.jsxs)("tr",{children:[r.map((t=>(0,s.jsx)("td",{children:e[t]},t))),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>a(e),children:"Compare"})})]},t)))})]})}}}]);
//# sourceMappingURL=260.8d1c355a.chunk.js.map