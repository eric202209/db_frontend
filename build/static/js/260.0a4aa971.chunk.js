"use strict";(self.webpackChunkdb_frontend=self.webpackChunkdb_frontend||[]).push([[260,764,640,98],{764:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var s=t(43),n=t(58),i=t(393),o=t(242),l=t(579);i.t1.register(i.PP,i.kc,i.E8,i.hE,i.m_,i.s$,i.Bs,i.FN,i.No,o.Ay);const r=e=>{let{data:a=[],title:t,type:i}=e;if(!a||0===a.length)return(0,l.jsx)("div",{children:"No data available for this chart."});const[o,r]=(0,s.useState)(null),c={labels:Array.isArray(a)?a.map((e=>e.make||e.vehClass||e.fuelType||e.trans||e.co2Rating||"")):[],datasets:[{label:t,data:Array.isArray(a)?a.map((e=>e.avgCons||e.combCons||e.count||e.avgCo2||e.percentage||0)):[],backgroundColor:"rgba(75,192,192,0.6)",borderColor:"rgba(75,192,192,1)",borderWidth:1,hoverBackgroundColor:"rgba(75,192,192,0.4)",hoverBorderColor:"rgba(75,192,192,1)"}]},d={scales:{y:{beginAtZero:!0}},onClick:(e,t)=>{if(t.length>0){const e=t[0].index;r(a[e])}},responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:t},zoom:{zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"xy"}},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),null!==e.parsed.y&&(a+=new Intl.NumberFormat("en-US",{style:"decimal"}).format(e.parsed.y)),a}}}}};let h;switch(i){case"fuelTypeDist":case"co2RatingPct":h=n.Fq;break;case"consByTrans":case"co2ByClass":h=n.N1;break;default:h=n.yP}return(0,l.jsxs)("div",{className:"chart",children:[(0,l.jsx)("h2",{children:t}),(0,l.jsx)(h,{data:c,options:d}),o&&(0,l.jsxs)("div",{className:"detail-view",children:[(0,l.jsx)("h3",{children:o.make||o.vehClass||o.fuelType||o.trans||o.co2Rating}),(0,l.jsxs)("p",{children:["Value: ",o.avgCons||o.combCons||o.count||o.avgCo2||o.percentage]})]})]})}},98:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});t(43);var s=t(579);const n=e=>{let{items:a}=e;return(0,s.jsxs)("div",{className:"comparison-view",children:[(0,s.jsx)("h2",{children:"Comparison"}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Make"}),(0,s.jsx)("th",{children:"Model"}),(0,s.jsx)("th",{children:"Fuel Consumption"}),(0,s.jsx)("th",{children:"CO2 Emissions"})]})}),(0,s.jsx)("tbody",{children:a.map(((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.make}),(0,s.jsx)("td",{children:e.model}),(0,s.jsx)("td",{children:e.fuelConsumption}),(0,s.jsx)("td",{children:e.co2Emissions})]},a)))})]})]})}},260:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(43),n=t(213),i=t(393),o=t(764),l=t(640),r=t(904),c=t(98),d=t(579);i.t1.register(i.kc,i.Bs);const h=()=>{const[e,a]=(0,s.useState)({avgConsMake:[],topEfficient:[],fuelTypeDist:[],co2ByClass:[],bestSmog:[],consByTrans:[],co2RatingPct:[],topLowCo2:[]}),[t,i]=(0,s.useState)({}),[h,m]=(0,s.useState)("avgConsMake"),[g,p]=(0,s.useState)([]),[u,C]=(0,s.useState)(!0),[x,j]=(0,s.useState)(null);(0,s.useEffect)((()=>{b()}),[t]);const[f,y]=(0,s.useState)(!1),b=async()=>{C(!0),j(null);try{const e=await n.A.get("/api/data",{params:t});console.log("Fetched data:",e.data);const s={avgConsMake:e.data.avgConsMake.map((e=>({make:e.MAKE,avgCons:e.AVG_CONS}))),topEfficient:e.data.topEfficient.map((e=>({make:e.MAKE,model:e.MODEL,combCons:e.COMB_CONS}))),fuelTypeDist:e.data.fuelTypeDist.map((e=>({fuelType:e.FUEL_TYPE,count:e.COUNT_FT}))),co2ByClass:e.data.co2ByClass.map((e=>({vehClass:e.VEH_CLASS,avgCo2:e.AVG_CO2}))),bestSmog:e.data.bestSmog.map((e=>({make:e.MAKE,model:e.MODEL,smogRating:e.SMOG_RATING}))),consByTrans:e.data.consByTrans.map((e=>({trans:e.TRANS,avgCons:e.AVG_CONS}))),co2RatingPct:e.data.co2RatingPct.map((e=>({co2Rating:e.CO2_RATING,count:e.COUNT_CR,percentage:e.PERCENTAGE}))),topLowCo2:e.data.topLowCo2.map((e=>({make:e.MAKE,avgCo2:e.AVG_CO2})))};a(s)}catch(x){j("Failed to fetch data. Please try again."),console.error("Error fetching data:",x)}finally{y(!1)}},v={avgConsMake:"Average Consumption by Make",co2ByClass:"CO2 Emissions by Vehicle Class",fuelTypeDist:"Fuel Type Distribution",bestSmog:"Best Smog Ratings",consByTrans:"Consumption by Transmission",co2RatingPct:"CO2 Rating Percentages",topLowCo2:"Top Low CO2 Emitters"};return u?(0,d.jsx)("div",{children:"Loading..."}):x?(0,d.jsxs)("div",{children:["Error: ",x]}):(0,d.jsxs)("div",{className:"dashboard",children:[f&&(0,d.jsx)("div",{className:"loading-indicator",children:"Loading..."}),x&&(0,d.jsx)("div",{className:"error-message",children:x}),(0,d.jsx)("button",{onClick:b,children:"Refresh Data"}),(0,d.jsx)(r.default,{onFilterChange:i}),(0,d.jsx)("select",{onChange:e=>m(e.target.value),children:Object.entries(v).map((e=>{let[a,t]=e;return(0,d.jsx)("option",{value:a,children:t},a)}))}),e[h]&&e[h].length>0?(0,d.jsx)(o.default,{data:e[h],title:v[h],type:h}):(0,d.jsx)("div",{children:"No data available for the selected chart."}),(0,d.jsxs)("div",{className:"top-efficient",children:[(0,d.jsx)("h2",{children:"Top Efficient Vehicles"}),e.topEfficient&&e.topEfficient.length>0?(0,d.jsx)(l.default,{data:e.topEfficient,onComparisonToggle:e=>{p((a=>a.includes(e)?a.filter((a=>a!==e)):[...a,e]))}}):(0,d.jsx)("p",{className:"no-data-message",children:"No data available for top efficient vehicles."})]}),g.length>0&&(0,d.jsx)(c.default,{items:g})]})}},640:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var s=t(43),n=t(579);const i=e=>{let{itemsPerPage:a,totalItems:t,paginate:s}=e;const i=[];for(let n=1;n<=Math.ceil(t/a);n++)i.push(n);return(0,n.jsx)("nav",{children:(0,n.jsx)("ul",{className:"pagination",children:i.map((e=>(0,n.jsx)("li",{className:"page-item",children:(0,n.jsx)("a",{onClick:()=>s(e),href:"!#",className:"page-link",children:e})},e)))})})},o=e=>{let{data:a,title:t,onComparisonToggle:o}=e;const[l,r]=(0,s.useState)(null),[c,d]=(0,s.useState)(""),h=s.useMemo((()=>{let e=[...a];return null!==l&&e.sort(((e,a)=>e[l.key]<a[l.key]?"ascending"===l.direction?-1:1:e[l.key]>a[l.key]?"ascending"===l.direction?1:-1:0)),e}),[a,l]),m=e=>{let a="ascending";l&&l.key===e&&"ascending"===l.direction&&(a="descending"),r({key:e,direction:a})},[g,p]=(h.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(c.toLowerCase()))))),(0,s.useState)(1)),u=10*g,C=u-10,x=a.slice(C,u);return(0,n.jsxs)("div",{className:"datatable",children:[(0,n.jsx)("h2",{children:t}),(0,n.jsx)("input",{type:"text",placeholder:"Search table...",value:c,onChange:e=>d(e.target.value)}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{onClick:()=>m("make"),children:"Make"}),(0,n.jsx)("th",{onClick:()=>m("model"),children:"Model"}),(0,n.jsx)("th",{onClick:()=>m("combined_consumption"),children:"Combined Consumption"}),(0,n.jsx)("th",{onClick:()=>m("co2_emissions"),children:"CO2 Emissions"}),(0,n.jsx)("th",{onClick:()=>m("compare"),children:"Compare"})]})}),(0,n.jsx)("tbody",{children:Array.isArray(x)&&x.map(((e,a)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.make||""}),(0,n.jsx)("td",{children:e.model||""}),(0,n.jsx)("td",{children:e.combined_consumption||""}),(0,n.jsx)("td",{children:e.co2_emissions||""}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"checkbox",onChange:()=>o(e)})})]},a)))})]}),(0,n.jsx)(i,{itemsPerPage:10,totalItems:a.length,paginate:e=>p(e)})]})}}}]);
//# sourceMappingURL=260.0a4aa971.chunk.js.map