"use strict";(self.webpackChunkdb_frontend=self.webpackChunkdb_frontend||[]).push([[396,764,640],{396:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(43);var r=a(764),s=a(640),n=a(579);const l=e=>{let{data:t,comparisonData:a}=e;const l=(e,t,a)=>{if(console.log("Formatting chart data for ".concat(t,":"),e),!e||Array.isArray(e)&&0===e.length)return console.warn("No data available for ".concat(t)),[];return a?(e=>{const a=Array.isArray(e)?e:[e];switch(t){case"avgConsMake":return a.map((e=>({label:e.MAKE,value:parseFloat(e.COMBINED_CONSUMPTION)})));case"co2ByClass":return a.map((e=>({label:e.VEHICLE_CLASS,value:parseFloat(e.CO2_EMISSIONS)})));case"fuelTypeDist":const e=a.reduce(((e,t)=>(e[t.FUEL_TYPE]=(e[t.FUEL_TYPE]||0)+1,e)),{});return Object.entries(e).map((e=>{let[t,a]=e;return{label:t,value:a}}));case"bestSmog":return a.map((e=>({label:"".concat(e.MAKE," ").concat(e.MODEL),value:parseFloat(e.SMOG_RATING)})));case"consByTrans":return a.map((e=>({label:e.TRANSMISSION,value:parseFloat(e.COMBINED_CONSUMPTION)})));case"co2RatingPct":const r=a.reduce(((e,t)=>{const a=t.co2_rating||"Unknown";return e[a]=(e[a]||0)+1,e}),{}),s=Object.values(r).reduce(((e,t)=>e+t),0);return Object.entries(r).map((e=>{let[t,a]=e;return{label:t.toString(),value:a/s*100}}));case"topLowCo2":const n=a.reduce(((e,t)=>{const a=t.make||"Unknown";return e[a]||(e[a]=[]),e[a].push(parseFloat(t.co2_emissions)||0),e}),{});return Object.entries(n).map((e=>{let[t,a]=e;return{label:t,value:a.reduce(((e,t)=>e+t),0)/a.length}})).sort(((e,t)=>e.value-t.value)).slice(0,10);case"topEfficient":return a.map((e=>({label:"".concat(e.MAKE," ").concat(e.MODEL),value:parseFloat(e.COMBINED_CONSUMPTION)})));default:return console.warn("Unsupported key: ".concat(t)),[]}})(e):e.map((e=>{const a=Object.keys(e);let r,s;switch(t){case"fuelTypeDist":case"avgConsMake":case"co2ByClass":case"consByTrans":case"topLowCo2":r=1,s=2;break;case"bestSmog":case"topEfficient":r=2,s=3;break;case"co2RatingPct":r=1,s=3;break;default:return null}return{label:e[a[r]],value:parseFloat(e[a[s]])}})).filter(Boolean)};return(0,n.jsx)("div",{className:"analysis-results",children:[{key:"avgConsMake",title:"Average Consumption",type:"bar"},{key:"co2ByClass",title:"CO2 Emissions by Vehicle Class",type:"bar"},{key:"fuelTypeDist",title:"Fuel Type Distribution",type:"pie"},{key:"bestSmog",title:"Best Smog Ratings",type:"bar"},{key:"consByTrans",title:"Consumption by Transmission",type:"bar"},{key:"co2RatingPct",title:"CO2 Rating Percentages",type:"pie"},{key:"topLowCo2",title:"Top Low CO2 Emitters",type:"bar"},{key:"topEfficient",title:"Top Efficient Vehicles",type:"bar"}].map((e=>{let{key:a,title:o,type:c}=e;return(0,n.jsxs)("div",{className:"chart-section",children:[(0,n.jsx)("h2",{children:o}),t[a]&&t[a].length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.default,{data:l(t[a],a),title:o,type:c}),(0,n.jsx)(s.default,{data:t[a]})]}):(0,n.jsxs)("p",{className:"no-data-message",children:["No data available for ",o,"."]})]},a)}))})}},764:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});a(43);var r=a(58),s=a(658),n=a(579);s.t1.register(s.PP,s.kc,s.FN,s.No,s.E8,s.Bs,s.hE,s.m_,s.s$);const l=e=>{const t=["rgba(75,192,192,0.6)","rgba(255,99,132,0.6)","rgba(255,206,86,0.6)","rgba(54,162,235,0.6)","rgba(153,102,255,0.6)","rgba(255,159,64,0.6)"];return Array(e).fill().map(((e,a)=>t[a%t.length]))},o=e=>{let{data:t,type:a,title:s}=e;if(console.log("Rendering chart for ".concat(s,":"),t),!t||!Array.isArray(t)||0===t.length)return(0,n.jsx)("div",{children:"No data available for this chart."});const o=t.map((e=>e.label)),c=t.map((e=>e.value)),i={labels:o,datasets:[{label:s,data:c,backgroundColor:"pie"===a?l(c.length):l(1)[0],borderColor:"line"===a?l(1)[0]:"rgba(75,192,192,1)",borderWidth:1}]},u={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:s},tooltip:{callbacks:{label:e=>{let t=e.label||"";return t&&(t+=": "),null!==e.parsed.y&&(t+=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2,style:"pie"===a?"percent":"decimal"}).format("pie"===a?e.parsed/100:e.parsed)),t}}}},scales:"pie"!==a?{y:{beginAtZero:!0,ticks:{callback:function(e){return"CO2 Rating Percentages"===s?e.toFixed(2)+"%":"Top Low CO2 Vehicles"===s||"CO2 Emissions by Vehicle Class"===s?e.toFixed(2)+" g/km":"Consumption by Transmission"===s||s.includes("Consumption")?e.toFixed(2)+" L/100km":e}}}}:{}};return(0,n.jsx)("div",{className:"chart-container",children:(()=>{try{switch(a){case"bar":default:return(0,n.jsx)(r.yP,{data:i,options:u});case"line":return(0,n.jsx)(r.N1,{data:i,options:u});case"pie":return(0,n.jsx)(r.Fq,{data:i,options:u})}}catch(e){return console.error("Error rendering chart:",e),(0,n.jsx)("div",{children:"Error rendering chart. Check console for details."})}})()})}},640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});a(43);var r=a(579);const s=e=>{let{data:t}=e;if(!t||0===t.length)return null;const a=Object.keys(t[0]);return(0,r.jsxs)("table",{className:"data-table",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:a.map((e=>(0,r.jsx)("th",{children:e.replace(/_/g," ")},e)))})}),(0,r.jsx)("tbody",{children:t.map(((e,t)=>(0,r.jsx)("tr",{children:a.map((t=>(0,r.jsx)("td",{children:e[t]},t)))},t)))})]})}}}]);
//# sourceMappingURL=396.cf3af8a0.chunk.js.map